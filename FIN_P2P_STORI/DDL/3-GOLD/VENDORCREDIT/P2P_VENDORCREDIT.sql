CREATE OR REPLACE SEQUENCE STORI_GOLD_DB_PROD.PROCUREMENT_TO_PAY.SEQUENCE_VENDORCREDIT START = 1 INCREMENT = 1 ORDER;

CREATE OR REPLACE TABLE STORI_GOLD_DB_PROD.PROCUREMENT_TO_PAY.VENDORCREDIT (
  ID INT NOT NULL DEFAULT STORI_GOLD_DB_PROD.PROCUREMENT_TO_PAY.SEQUENCE_VENDORCREDIT UNIQUE PRIMARY KEY
  , FORM_ID INT NOT NULL COMMENT 'ID OF THE FORM USED FOR INTERNAL TRANSACTIONS, DEFAULT ID: 470'
  , EXTERNAL_ID VARCHAR(255) NOT NULL COMMENT 'UNIQUE ID GENERATED BY STORI TO LINK THE TRANSACTION TO NETSUITE'
  , IS_INTERNAL_TRANSACTION BOOLEAN NOT NULL DEFAULT TRUE COMMENT 'TRUE IF THIS IS AN INTERNAL TRANSACTION'
  , ENTITY_ID INT NOT NULL COMMENT 'ID OF THE THIRD PARTY ENTITY ASSOCIATED WITH THE TRANSACTION'
  , ACCOUNT_ID INT NOT NULL COMMENT 'ID OF THE ACCOUNT RECEIVABLE'
  , CURRENCY_ID INT NOT NULL COMMENT 'ID OF THE CURRENCY USED FOR THE TRANSACTION'
  , EXCHANGE_RATE DOUBLE NOT NULL DEFAULT 1 COMMENT 'EXCHANGE RATE USED IF CURRENCY IS DIFFERENT FROM CUSTOMER CURRENCY, DEFAULT IS 1'
  , TRANSACTION_DATE DATE NOT NULL COMMENT 'DATE OF THE TRANSACTION IN YYYY-MM-DD FORMAT'
  , DUE_DATE DATE NOT NULL COMMENT 'DUE DATE OF THE TRANSACTION, CALCULATED AS TRANSACTION_DATE + 90 DAYS'
  , OTHER_REF_NUM VARCHAR(255) COMMENT 'PURCHASE ORDER NUMBER IF APPLICABLE'
  , MEMO VARCHAR(255) COMMENT 'NOTES OR MEMO FOR THE TRANSACTION'
  , SUBSIDIARY_ID INT NOT NULL COMMENT 'ID OF THE SUBSIDIARY CALCULATED BASED ON THE COUNTRY'
  , DEPARTMENT_ID INT NOT NULL COMMENT 'ID OF THE COST CENTER ASSOCIATED WITH THE TRANSACTION'
  , VERTICAL_ID INT NOT NULL COMMENT 'ID OF THE VERTICAL ASSOCIATED WITH THE TRANSACTION'
  , COUNTRY_ID INT NOT NULL COMMENT 'ID OF THE COUNTRY ASSOCIATED WITH THE TRANSACTION'
  , POLICY_CONCEPT_ID INT NOT NULL DEFAULT 20 COMMENT 'POLICY CONCEPT ID, DEFAULT ID: 20 (PROVISION)'
  , POLICY_NOTE VARCHAR(255) COMMENT 'NOTE ASSOCIATED WITH THE POLICY CONCEPT'
  , APPROVAL_STATUS_ID INT NOT NULL DEFAULT 2 COMMENT 'APPROVAL STATUS, DEFAULT ID: 2 (APPROVED)'
  , PAYMENT_HOLD BOOLEAN NOT NULL DEFAULT TRUE COMMENT 'TRUE IF THE PAYMENT IS ON HOLD'
  , LOADED_AT TIMESTAMP_TZ(9) DEFAULT CURRENT_TIMESTAMP COMMENT 'TIMESTAMP WHEN THE RECORD WAS LOADED INTO THE DATABASE'
)
COMMENT =
    'THIS TABLE STORES THE BODY DETAILS OF INTERNAL TRANSACTIONS, INCLUDING FORM, EXTERNAL ID,
    ENTITY, ACCOUNT, CURRENCY, EXCHANGE RATE, AND VARIOUS DATES.
    ADDITIONAL FIELDS INCLUDE PAYMENT TERMS, COST CENTER, VERTICAL, SUBSIDIARY, POLICY DETAILS,
    AND APPROVAL STATUS.
    IT TRACKS THE ESSENTIAL INFORMATION NEEDED TO MANAGE FINANCIAL TRANSACTIONS WITH NETSUITE AND INTERNAL SYSTEMS.'
CLUSTER BY (ENTITY_ID, COUNTRY_ID, TRANSACTION_DATE)
;